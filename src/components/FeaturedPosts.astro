---
const allPosts = await Astro.glob('../pages/blog/posts/*.md');
const popularPosts = allPosts
	.filter(post => post.frontmatter.isFeatured && post.frontmatter.isPublished)
	.sort((a, b) => new Date(b.frontmatter.publishedOn).valueOf() - new Date(a.frontmatter.publishedOn).valueOf())
	.slice(0, 3);
---

<article class="grid mb-6">
	<div class="md:mb-0 mb-6">
		<h4 class="text-2xl mb-3">Featured Posts ðŸŒŸ</h4>
		<div class="grid md:grid-cols-3 gap-x-4 gap-y-4">
			{popularPosts.map((post) => (
			<a href={`/blog/posts/${post.frontmatter.slug}`}>
				<div
					class="bg-emerald-400/10 shadow dark:shadow-none rounded overflow-hidden h-96 border border-emerald-400 px-2">
					<h5 class="text-xl mt-3 mb-6 px-2 h-20">{post.frontmatter.title}</h5>
					<img src={post.frontmatter.image} height="168" width="320" class="rounded mb-4"
						alt={post.frontmatter.title} />
					<p class="px-2 line-clamp-3 opacity-60">{post.frontmatter.description}</p>
				</div>
			</a>
			))}
		</div>
	</div>
</article>